import cheerio from "cheerio";
import axios from "axios";
import { getTagUrl } from "./tags";
const getWorksUrl = (tagName) => `${getTagUrl(tagName)}/works`;
export const getWorksPage = async (tagName) => {
    return cheerio.load((await axios.get(getWorksUrl(tagName))).data);
};
export const getTagId = ($worksPage) => {
    var _a;
    return ((_a = $worksPage(".rss")[0]) === null || _a === void 0 ? void 0 : _a.attribs["href"].split("/")[2]) || null;
};
export const getWorkUrl = ({ workId, chapterId, collectionName, }) => {
    let workUrl = `https://archiveofourown.org`;
    if (collectionName) {
        workUrl += `/collections/${collectionName}`;
    }
    workUrl += `/works/${workId}`;
    if (chapterId) {
        workUrl += `/chapters/${chapterId}`;
    }
    return workUrl;
};
